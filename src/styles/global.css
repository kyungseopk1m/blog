@import "tailwindcss";

/* Tailwind v4 다크모드 설정 */
@variant dark (.dark &);

@theme {
  --color-accent: #007AFF;
  --color-accent-light: #5AC8FA;

  --font-sans: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

/* 다크모드 accent color 오버라이드 */
.dark {
  --color-accent: #3395FF;
}

html {
  font-size: 18px;
  scrollbar-gutter: stable;
  transition: background-color 0.3s ease-out, color 0.3s ease-out;
}

body {
  @apply subpixel-antialiased leading-relaxed;
  font-family: var(--font-sans);
  transition: background-color 0.3s ease-out, color 0.3s ease-out;
}

code, pre {
  font-family: var(--font-mono);
}

/* 다크모드 전환 애니메이션 */
body,
header, nav, main, footer, article, section, div,
a, button, input, textarea,
h1, h2, h3, h4, h5, h6,
p, li, span, blockquote,
th, td,
.toc, .markdown {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-duration: 0.3s;
  transition-timing-function: ease-out;
}

/* 특정 요소는 transition 제외 (성능 최적화) */
img, video, iframe, canvas, svg {
  transition: none !important;
}

/* Selection color */
::-moz-selection {
  @apply text-white;
  background-color: var(--color-accent);
}
::selection {
  @apply text-white;
  background-color: var(--color-accent);
}

/* Markdown content styling */
.markdown {
  min-height: 200px;

  & > *:first-child {
    margin-top: 0 !important;
  }
  & > *:last-child {
    margin-bottom: 0 !important;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply mt-8 mb-4 font-semibold;
  }

  h1 {
    @apply text-3xl pb-2 border-b border-slate-200 dark:border-zinc-700;
  }

  h2 {
    @apply text-2xl pb-2 border-b border-slate-200 dark:border-zinc-700;
  }

  h3 {
    @apply text-xl;
  }

  h4 {
    @apply text-base;
  }

  h5 {
    @apply text-sm;
  }

  h6 {
    @apply text-sm text-slate-500 dark:text-zinc-400;
  }

  figure,
  p,
  blockquote,
  ol,
  ul {
    @apply mb-8;
    word-break: keep-all;
    overflow-wrap: break-word;
  }

  blockquote {
    @apply border-l-6 p-4 bg-slate-50 dark:bg-zinc-800;
    border-left-color: var(--color-accent);
    > *:last-child {
      @apply mb-0;
    }
  }

  a {
    @apply hover:opacity-70 transition-opacity;
    color: var(--color-accent);
  }

  ol,
  ul {
    @apply pl-4;
    li + li {
      @apply mt-1;
    }
    ol,
    ul {
      @apply mt-1 mb-0;
    }
  }

  ol {
    list-style-type: decimal;
    ol {
      list-style-type: lower-roman;
    }
  }

  ul {
    list-style-type: disc;
    ul {
      list-style-type: circle;
    }
  }

  iframe {
    @apply mb-4 max-w-full;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    & > code {
      @apply bg-slate-100 dark:bg-zinc-800 px-1 mx-0.5 rounded-md;
      color: var(--color-accent);
    }
  }

  :not(pre, h1, h2, h3, h4, h5, h6) > code {
    @apply break-all text-sm px-1 py-0.5 mx-0.5 rounded-md whitespace-normal;
  }

  :not(pre, h1, h2, h3, h4, h5, h6) > code:not(.astro-code) {
    @apply bg-slate-100 dark:bg-zinc-800;
    color: var(--color-accent);
  }

  figure figcaption {
    @apply text-center mt-1 text-sm text-gray-500 dark:text-zinc-400;
  }

  img {
    @apply mx-auto rounded-lg my-8 max-w-full h-auto w-full max-w-2xl;
  }
}

/* Center content variant */
.markdown-center {
  text-align: center;

  blockquote,
  ol,
  ul {
    text-align: left;
  }

  img {
    margin-left: auto;
    margin-right: auto;
  }
}

/* Excerpt markdown (for post cards) */
.excerpt-markdown {
  code {
    @apply bg-slate-100 dark:bg-zinc-800 break-all text-sm px-1 py-0.5 mx-0.5 rounded-md whitespace-normal;
    color: var(--color-accent);
  }
}

/* Code block styling */
.astro-code {
  @apply mb-4 rounded-lg overflow-auto relative py-4;
  -webkit-overflow-scrolling: touch;
  font-feature-settings: normal;
  font-size: 0.8125rem;
  line-height: 1.5;

  code {
    @apply min-w-full;
    font-size: inherit;
  }

  span.line {
    @apply px-4;
  }
}

/* Auto link for headings */
a.autolink {
  padding-left: 0.5rem;
  display: inline-flex !important;
  align-items: center;
  height: 1rem;
  svg {
    width: 1rem;
    height: 1rem;
    visibility: hidden;
  }
}
h2,
h3,
h4,
h5,
h6 {
  &:hover a.autolink svg {
    visibility: visible;
  }
}

/* Preview images */
.preview picture img {
  @apply mx-auto;
}
